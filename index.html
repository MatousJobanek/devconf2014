<!doctype html>
<html lang="en">

    <head>
        <meta charset="utf-8">

        <title>DevConf 2014 | DeltaSpike &ndash; CDI extensions of the world, unite!</title>

        <meta name="description" content="Several popular CDI extension frameworks like Seam 3 and MyFaces CODI have faded out over the years. But not to worry - their functionality is taken over by projects like Picketlink, Agorava, and mainly DeltaSpike, a new Apache project that wants CDI extension authors to unite in an effort to make the life of web application developers easier. Even without a five year plan!">
        <meta name="author" content="Matous Jobanek, Ron Smeral">

        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

        <link rel="stylesheet" href="css/reveal.min.css">
        <link rel="stylesheet" href="css/theme/default.css" id="theme">

        <!-- For syntax highlighting -->
        <link rel="stylesheet" href="lib/css/zenburn.css">

        <!-- If the query includes 'print-pdf', use the PDF print sheet -->
        <script>
            document.write('<link rel="stylesheet" href="css/print/' + (window.location.search.match(/print-pdf/gi) ? 'pdf' : 'paper') + '.css" type="text/css" media="print">');
        </script>

        <!--[if lt IE 9]>
        <script src="lib/js/html5shiv.js"></script>
        <![endif]-->
        <style>
            div.seam {
                background: #007777 !important;
            }

            div.codi {
                background: #995500 !important;
            }

            div.deltaspike {
                background: #993377 !important;
            }

            div.other-framework {
                background: #333333 !important;
            }

            div.inactive {
                opacity: 0.25;
            }

            div.module-box {
                display: inline-block;
                font-size: 0.6em;
                padding: 10px;
                line-height: 1em;
                box-shadow: 2px 2px 6px 0 rgba(0,0,0,0.2);
                border-radius: 10px;
                width: 140px;
            }

            div.invisible {
                visibility: hidden;
            }

            div.module-box.title {
                margin-bottom: 25px;
            }

            div.code-annotation {
                font-size: 0.55em;
                text-align: left;
                padding-bottom: 0;
                margin-bottom: -8px;
                line-height: 1em;
                width: 90%;
                color: #808080;
                display: block;
                margin-left: auto;
                margin-right: auto;
            }

            pre.code-overlay {
                box-shadow: none;
            }

            pre[class~=code-overlay] + pre:not([class~=code-overlay]) {
                margin-top: 25px;
            }

            div.jsf_annotation {
                width: auto;
                padding-left: 15px;
                padding-right: 15px;
            }

            div.security_annotation {
                width: auto;
                padding-left: 15px;
                padding-right: 15px;
            }

        </style>
    </head>

    <body>
        <div class="reveal">

            <!-- Any section element inside of this container is displayed as a slide -->
            <div class="slides">

                <section id="title">
                    <h1>DeltaSpike</h1>
                    <h3>CDI extensions of the world, unite!</h3>
                    <p>
                        <small>DevConf 2014</small>
                    </p>
                </section>

                <section id="us">
                    <h2>Us</h2>

                    <div class="fragment" style="width: 500px; display: inline-block; text-align: left; margin-bottom: 20px;">
                        <img src="img/ron.jpg" style="float: left; margin-right:20px" width="100"/>
                        <div style="padding-top: 10px;">
                            Ron Šmeral<br/>
                            <small><a href="http://github.com/rsmeral">@rsmeral</a></small><br />
                            <small>Seam QE at RH, student at FI MU</small>
                        </div>
                    </div><!--
                    --><br /><!--
                    --><div class="fragment" style="width: 500px; display: inline-block; text-align: left;">
                        <img src="img/matous.jpg" style="float: left; margin-right:20px" width="100"/>
                        <div style="padding-top: 10px;">
                            Matouš Jobánek<br/>
                            <small><a href="http://github.com/MatousJobanek">@MatousJobanek</a></small>
                            <small>WFK QE at RH, GWT wiz</small>
                        </div>
                    </div>
                </section>

                <section id="cdi-stack">
                    <section id="cdi-title">
                        <h1>CDI</h1>
                    </section>

                    <section id="cdi-1">
                        <h2>CDI</h2>
                        <p>Contexts and Dependency Injection</p>
                        <p class="fragment">Weld, OWB, CanDI</p>
                        <p class="fragment">Type-safe resolution, Scopes</p>
                        <pre class="fragment" style="width: 98%; display: inline-block;"><code data-trim class="java">
public class UserController {

    @Inject @User
    public Repository repo;
</code></pre>
                        <pre class="fragment" style="width: 49%; display: inline-block;"><code data-trim class="java">
@SessionScoped @User
class UserRepo implements Repository {

...
</code></pre>
                        <pre class="fragment" style="width: 49%; display: inline-block;"><code data-trim class="java">
class Repositories {

    @Produces @SessionScoped @User
    public Repository getUserRepo() {
</code></pre>
                    </section>

                    <section id="cdi-2">
                        <h2>CDI</h2>
                        <p>Interceptors</p>
                        <pre class="fragment" style="width: 98%; display: inline-block;"><code data-trim class="java">
public class Account {
...
    @Audited
    public void changePassword(Credentials c) {

...
</code></pre>
                        <pre class="fragment" style="width: 98%; display: inline-block;"><code data-trim class="java">
@Interceptor @Audited
public class AuditInterceptor {
    
    @AroundInvoke
    public logOperation() {
...
</code></pre>
                    </section>

                    <section id="cdi-3">
                        <h2>CDI</h2>
                        <p>Events</p>
                        <pre class="fragment" style="width: 98%; display: inline-block;"><code data-trim class="java">
public void updatePasswordExpiryDate(@Observes @Changed Credentials) {
...
</code></pre>
                        <pre class="fragment" style="width: 98%; display: inline-block;"><code data-trim class="java">
@Inject @Changed Event&lt;Credentials&gt; changeEvent;

public changePassword(Credentials c) {
    ...
    changeEvent.fire(c);
</code></pre>
                    </section>
                </section>

                <section id="cdi-ext">
                    <h2>CDI extensions</h2>
                    <p>SPI for integration with other technologies<br /><small>Seam, Spring, GWT, ...</small></p>
                    <p class="fragment">ServiceLoader pattern<br /><small>META-INF/services</small></p>
                    <p class="fragment">Custom scopes<br /><small><code>@PageScope, @BusinessProcessScope</code></small></p>
                    <p class="fragment">Provide beans, augment existing beans</p>
                    <p class="fragment">Catch system events for deployment phases<br /><small>before/after deployment, per bean, per injection point</small></p>
                </section>

                <section id="cdi-existing-ext">
                    <h2>Existing extensions</h2>
                    <p class="fragment">Many integrations with other frameworks</p>
                    <p class="fragment">PicketLink, RestEasy, Agorava, &hellip;</p>
                    <br />
                    <h3 class="fragment">Frameworks</h3>
                    <p class="fragment"><small>zk, SoftwareMill</small></p>
                    <p class="fragment current-visible">Seam 3, MyFaces CODI</p>
                    <p class="fragment current-visible">Unite</p>
                </section>

                <!-- DUMMY SECTION, FIX HEIGHT + TRANSITION HELPER -->
                <section data-transition="fade" id="cdi-frameworks-transition-helper">
                    <h2>Frameworks</h2>
                    <div class="invisible">
                        <p><img src="img/seam.png" width="45"  style="border: none; background: none; box-shadow: none; margin: 0 10px 0 0; vertical-align: bottom" />JBoss Seam 3</p>
                        <div>
                            <div class="module-box seam">Solder</div>
                            <div class="module-box seam">Config</div>
                            <div class="module-box seam">Catch</div>
                            <div class="module-box seam">Security</div>
                            <div class="module-box seam">Social</div>
                            <div class="module-box seam">Mail</div>
                            <div class="module-box seam">Transaction</div>
                            <div class="module-box seam">Render</div>
                            <div class="module-box seam">Cron</div>
                            <div class="module-box seam">Reports</div>
                            <div class="module-box seam">Remoting</div>
                            <div class="module-box seam">Rest</div>
                            <div class="module-box seam">JMS</div>
                            <div class="module-box seam">Persistence</div>
                            <div class="module-box seam">Validation</div>
                            <div class="module-box seam">Servlet</div>
                            <div class="module-box seam">Wicket</div>
                            <div class="module-box seam">Drools</div>
                            <div class="module-box seam">jBPM</div>
                            <div class="module-box seam">Faces</div>
                            <div class="module-box invisible">nothing</div>
                            <div class="module-box seam">Spring</div>
                            <div class="module-box seam">JCR</div>
                        </div>
                    </div>
                    <div class="invisible">
                        <p style="margin-top: 30px;"><img src="img/codi.png" width="40"  style="border: none; background: none; box-shadow: none; margin: 0 10px 0 0; vertical-align: bottom" />MyFaces CODI</p>
                        <div>
                            <div class="module-box codi">Core</div>
                            <div class="module-box codi">JSF</div>
                            <div class="module-box codi">BV</div>
                            <div class="module-box codi">JPA</div>
                            <div class="module-box codi">Message</div>
                        </div>
                    </div>
                    <div class="invisible">
                        <p style="margin-top: 30px;">Other</p>
                        <div>
                            <div class="module-box other-framework">cdi-query</div>
                        </div>
                    </div>
                </section>

                <section data-transition="none" id="cdi-frameworks">
                    <h2>Frameworks</h2>
                    <div class="fragment">
                        <p><img src="img/seam.png" width="45"  style="border: none; background: none; box-shadow: none; margin: 0 10px 0 0; vertical-align: bottom" />JBoss Seam 3</p>
                        <div>
                            <div class="module-box seam">Solder</div>
                            <div class="module-box seam">Config</div>
                            <div class="module-box seam">Catch</div>
                            <div class="module-box seam">Security</div>
                            <div class="module-box seam">Social</div>
                            <div class="module-box seam">Mail</div>
                            <div class="module-box seam">Transaction</div>
                            <div class="module-box seam">Render</div>
                            <div class="module-box seam">Cron</div>
                            <div class="module-box seam">Reports</div>
                            <div class="module-box seam">Remoting</div>
                            <div class="module-box seam">Rest</div>
                            <div class="module-box seam">JMS</div>
                            <div class="module-box seam">Persistence</div>
                            <div class="module-box seam">Validation</div>
                            <div class="module-box seam">Servlet</div>
                            <div class="module-box seam">Wicket</div>
                            <div class="module-box seam">Drools</div>
                            <div class="module-box seam">jBPM</div>
                            <div class="module-box seam">Faces</div>
                            <div class="module-box invisible">nothing</div>
                            <div class="module-box seam">Spring</div>
                            <div class="module-box seam">JCR</div>
                        </div>
                    </div>
                    <div  class="fragment">
                        <p style="margin-top: 30px;"><img src="img/codi.png" width="40"  style="border: none; background: none; box-shadow: none; margin: 0 10px 0 0; vertical-align: bottom" />MyFaces CODI</p>
                        <div>
                            <div class="module-box codi">Core</div>
                            <div class="module-box codi">JSF</div>
                            <div class="module-box codi">BV</div>
                            <div class="module-box codi">JPA</div>
                            <div class="module-box codi">Message</div>
                        </div>
                    </div>
                    <div  class="fragment">
                        <p style="margin-top: 30px;">Other</p>
                        <div>
                            <div class="module-box other-framework">cdi-query</div>
                        </div>
                    </div>
                </section>

                <section data-transition="none" id="deltaspike-friends">
                    <h2><span style="color: #993377">&#9632;</span> DeltaSpike &amp; <span style="color: #333333">&#9632;</span> friends</h2>
                    <div>
                        <p style="opacity: 0.3"><img src="img/seam.png" width="45"  style="border: none; background: none; box-shadow: none; margin: 0 10px 0 0; vertical-align: bottom" />JBoss Seam 3</p>
                        <div>
                            <div class="module-box deltaspike">Core</div>
                            <div class="module-box other-framework">Aries</div>
                            <div class="module-box deltaspike">Core</div>
                            <div class="module-box deltaspike">Security</div>
                            <div class="module-box other-framework">Agorava</div>
                            <div class="module-box invisible">Mail</div>
                            <div class="module-box deltaspike">JPA</div>
                            <div class="module-box invisible">Render</div>
                            <div class="module-box deltaspike">Scheduler</div>
                            <div class="module-box invisible">Reports</div>
                            <div class="module-box invisible">Remoting</div>
                            <div class="module-box other-framework">RestEasy</div>
                            <div class="module-box other-framework">JMS 2.0</div>
                            <div class="module-box other-framework">JTA 1.1</div>
                            <div class="module-box deltaspike">beanval</div>
                            <div class="module-box deltaspike">Servlet</div>
                            <div class="module-box other-framework">Wicket</div>
                            <div class="module-box other-framework">Drools</div>
                            <div class="module-box invisible">jBPM</div>
                            <div class="module-box deltaspike">JSF</div>
                            <div class="module-box deltaspike">Test-Control</div>
                            <div class="module-box deltaspike">PartialBean</div>
                            <div class="module-box invisible">Spring</div>
                            <div class="module-box other-framework">ModeShape</div>
                            <div class="module-box invisible">spacer</div>
                        </div>
                    </div>
                    <div>
                        <p style="opacity: 0.3; margin-top: 30px;"><img src="img/codi.png" width="40"  style="border: none; background: none; box-shadow: none; margin: 0 10px 0 0; vertical-align: bottom" />MyFaces CODI</p>
                        <div>
                            <div class="module-box deltaspike">Core</div>
                            <div class="module-box deltaspike">JSF</div>
                            <div class="module-box deltaspike">beanval</div>
                            <div class="module-box deltaspike">JPA</div>
                            <div class="module-box deltaspike">Core</div>
                        </div>
                    </div>
                    <div>
                        <p style="opacity: 0.3; margin-top: 30px;">Other</p>
                        <div>
                            <div class="module-box deltaspike">Data</div>
                        </div>
                    </div>
                </section>

                <section data-transition="fade" id="deltaspike-intro">
                    <h2>DeltaSpike</h2>
                    <div>
                        <div style="width: 200px; display: inline-block">
                            <div class="module-box deltaspike">Core</div>
                            <div class="module-box deltaspike">Data</div>
                            <div class="module-box deltaspike">JPA</div>
                            <div class="module-box deltaspike">BeanVal</div>
                            <div class="module-box deltaspike">Partial Bean</div>
                            <div class="module-box deltaspike">Scheduler</div>
                            <div class="module-box deltaspike">Test Control</div>
                            <div class="module-box deltaspike">Servlet</div>
                            <div class="module-box deltaspike">JSF</div>
                            <div class="module-box deltaspike">Security</div>
                            <div class="module-box invisible">spacer</div>
                            <div class="module-box invisible">spacer</div>
                        </div>
                        <div style="width: 600px; text-align: left; display: inline-block; vertical-align: top; margin-top: 10px">
                            <div>
                                <h3 style="display:inline" class="fragment">What?</h3>
                                <p style="display: inline-block; vertical-align: top" class="fragment">CDI extension framework</p>
                            </div>
                            <br/>
                            <div>
                                <h3 style="display:inline" class="fragment">Why?</h3>
                                <p style="display: inline-block; vertical-align: top" class="fragment">Unite efforts</p>
                            </div>
                            <br/>
                            <div>
                                <h3 style="display:inline" class="fragment">Who?</h3>
                                <p style="display: inline-block; vertical-align: top" class="fragment">Apache committers<br />Seam developers<br />other CDI ext. authors</p>
                            </div>
                            <br/>
                            <div>
                                <h3 style="display:inline" class="fragment">When?</h3>
                                <p style="display: inline-block; vertical-align: top" class="fragment">now: 0.6-SNAPSHOT<br /><i>soon:</i> 1.0</p>
                            </div>
                        </div>
                    </div>
                </section>

                <section data-transition="fade" id="deltaspike-modules-intro">
                    <h2>DeltaSpike</h2>
                    <div style="width: 200px; display: inline-block">
                        <div class="module-box deltaspike">Core</div>
                        <div class="module-box deltaspike">Data</div>
                        <div class="module-box deltaspike">JPA</div>
                        <div class="module-box deltaspike">BeanVal</div>
                        <div class="module-box deltaspike">Partial Bean</div>
                        <div class="module-box deltaspike">Scheduler</div>
                        <div class="module-box deltaspike">Test Control</div>
                        <div class="module-box deltaspike">Servlet</div>
                        <div class="module-box deltaspike">JSF</div>
                        <div class="module-box deltaspike">Security</div>
                        <div class="module-box other-framework">Agorava</div>
                        <div class="module-box other-framework">PicketLink</div>
                    </div>
                </section>

                <section data-transition="fade" id="deltaspike-modules-allocation-ron">
                    <h2>DeltaSpike</h2>
                    <div>
                        <div style="width: 200px; display: inline-block">
                            <div class="module-box deltaspike">Core</div>
                            <div class="module-box deltaspike">Data</div>
                            <div class="module-box deltaspike inactive">JPA</div>
                            <div class="module-box deltaspike">BeanVal</div>
                            <div class="module-box deltaspike">Partial Bean</div>
                            <div class="module-box deltaspike">Scheduler</div>
                            <div class="module-box deltaspike inactive">Test Control</div>
                            <div class="module-box deltaspike inactive">Servlet</div>
                            <div class="module-box deltaspike inactive">JSF</div>
                            <div class="module-box deltaspike inactive">Security</div>
                            <div class="module-box other-framework inactive">Agorava</div>
                            <div class="module-box other-framework inactive">PicketLink</div>
                        </div>
                    </div>
                </section>

                <section id="deltaspike-core-stack">

                    <section id="ds-core-exceptions">
                        <h2 style="margin: 0; padding: 0">DeltaSpike</h2>
                        <div class="module-box deltaspike title">Core</div>
                        <p class="fragment" data-fragment-index="0">Exceptions as events</p>
                        <pre style="position: absolute; width: 100%" class="fragment" data-fragment-index="1">
<code class="java">

...
try {
    doSomethingNasty();
} catch(TooNastyException ex) {
    logger.log("something nasty happened");
}
</code></pre>

                        <pre style="position: absolute; width: 100%" class="fragment code-overlay" data-fragment-index="2">
<code class="java">@Inject
private Event&lt;ExceptionToCatchEvent&gt; exEvt;
...
try {
    doSomethingNasty();
} catch(TooNastyException ex) {
    exEvt.fire(new ExceptionToCatchEvent(ex));
}
</code></pre>
                        <pre style="position: absolute; width: 100%" class="fragment code-overlay" data-fragment-index="5">
<code class="java">@Inject
private Event&lt;ExceptionToCatchEvent&gt; exEvt;
...
try {
    doSomethingNasty();
} catch(TooNastyException ex) {
    exEvt.fire(new ExceptionToCatchEvent(ex, new UglyLiteral()));
}
</code></pre>
                        <!-- overlay helper spacer -->
                        <pre style="width: 100%; visibility: hidden" class="code-overlay">
<code class="java">







</code></pre>

                        <pre class="fragment" style="width: 100%;" data-fragment-index="3"><code data-trim class="java">
@ExceptionHandler
public class LoggingHandler {
    void logException(@BeforeHandles ExceptionEvent&lt;Exception&gt; evt) {
</code></pre>
                        <pre class="fragment" style="position: absolute; width: 100%;" data-fragment-index="4"><code data-trim class="java">
@ExceptionHandler
public class NastinessHandler {
    void spank(@Handles ExceptionEvent&lt;TooNastyException&gt; evt) {
</code></pre>
                        <pre class="fragment code-overlay" style="position: absolute; width: 100%;" data-fragment-index="5"><code data-trim class="java">
@ExceptionHandler
public class NastinessHandler {
    void spank(@Handles @Ugly ExceptionEvent&lt;TooNastyException&gt; evt) {
</code></pre>
                    </section>

                    <section id="ds-core-messages">
                        <h2 style="margin: 0; padding: 0">DeltaSpike</h2>
                        <div class="module-box deltaspike title">Core</div>
                        <div>
                            <p>Type-safe messages</p>
                            <pre><code data-trim class="java">
@MessageBundle
public interface AppMessages {

    @MessageTemplate("Hello, %s!")
    String hello(String name);

    @MessageTemplate("{greeting}")
    String greet(String greeting, String name);
</code></pre>
                        </div>
                        <div class="fragment">
                            <div class="code-annotation">AppMessages.properties</div>
                            <pre><code data-trim>
greeting=%s, %s!
</code></pre>
                        </div>
                        <div class="fragment">
                            <div class="code-annotation">Usage</div>
                            <pre><code data-trim class="java">
@Inject AppMessages msg;
...
msg.greet("Hello", "DevConf");
msg.hello("World");
</code></pre>
                        </div>

                    </section>

                    <section id="ds-core-projectstage-resources">
                        <h2 style="margin: 0; padding: 0">DeltaSpike</h2>
                        <div class="module-box deltaspike title">Core</div>
                        <div>
                            <p>ProjectStage, conditional bean exclusion</p>
                            <pre><code data-trim class="java">
@Exclude(exceptIfProjectStage=IntegrationTest.class)
public class TestUserRepository { ...
</code></pre>
                        </div>
                        <div class="fragment">
                            <p>Resource loading</p>
                            <pre><code data-trim class="java">
@Inject
@ExternalResource("schedule.xml")
private InputStream inputStream;

@Inject
@ExternalResource("api-keys.properties")
private Properties apiKeys;
</code></pre>
                        </div>
                    </section>

                </section>

                <section id="deltaspike-data-stack">

                    <section id="ds-data-intro">
                        <h2 style="margin: 0; padding: 0">DeltaSpike</h2>
                        <div class="module-box deltaspike title">Data</div>

                        <pre><code data-trim class="java">
JDBC example
</code></pre>

                        <pre><code data-trim class="java">
@Stateful
@ConversationScoped
public class EmployeeRepository {
   
    @PersistenceContext(type = PersistenceContextType.EXTENDED)
    private EntityManager em;

    public void persist(Employee e) {
        em.persist(e);
        em.flush();
    }

    public void remove(Employee e) {
        em.remove(e);
        em.flush();
    }

    public List&lt;Employee&gt; getAllEmployees() {
        return em.createQuery("SELECT e FROM Employee e").getResultList();
    }

    public List&lt;Employee&gt; findByName(String name) {
        return em.createQuery("SELECT e From Employee e WHERE e.name LIKE :name")
                 .setParameter("name", name).getResultList();
    }
}
</code></pre>

                        <pre><code data-trim class="java">
@Repository
public interface EmployeeRepository 
extends EntityRepository&lt;Employee, Long&gt; {}
</code></pre>           
                    </section>

                    <section id="ds-data-features">
                        <h2 style="margin: 0; padding: 0">DeltaSpike</h2>
                        <div class="module-box deltaspike title">Data</div>
                        <div>
                            <p>Query as annotation</p>
                            <pre><code data-trim class="java">
@Query("SELECT e from Employee e where e.birthDate = ?1")
Person findByBirthDate(Date d);
</code></pre>
                        </div>

                        <div class="fragment">
                            <p>Method name DSL</p>
                            <pre><code data-trim class="java">
List&lt;Person&gt; findByNameLikeAndAgeBetweenAndGender(
    String name, int minAge, int maxAge, Gender gender);
</code></pre>
                        </div>
                    </section>

                    <section id="ds-data-features-more">
                        <h2 style="margin: 0; padding: 0">DeltaSpike</h2>
                        <div class="module-box deltaspike title">Data</div>
                        <div class="fragment">
                            <p>Auditing API</p>
                            <pre><code data-trim class="java">
@ModifiedOn
@Temporal(TemporalType.TIMESTAMP)
private Date updated;

@ModifiedBy
private String auditUser;
</code></pre>
                        </div>

                        <div class="fragment">
                            <p>Criteria API support</p>
                            <p>Query Delegate &ndash; custom DSL</p>
                            <p>DTO mapping</p>
                            <p>Pagination</p>
                            <p>...</p>
                        </div>
                    </section>

                </section>

                <!--                <section id="deltaspike-jpa">
                                    
                                        <h2 style="margin: 0; padding: 0">DeltaSpike</h2>
                                        <div class="module-box deltaspike title">JPA</div>
                
                                </section>-->

                <section id="deltaspike-beanval">

                    <h2 style="margin: 0; padding: 0">DeltaSpike</h2>
                    <div class="module-box deltaspike title">BeanVal</div>

                </section>

                <section id="deltaspike-partialbean">

                    <h2 style="margin: 0; padding: 0">DeltaSpike</h2>
                    <div class="module-box deltaspike title">Partial Bean</div>

                </section>

                <section id="deltaspike-scheduler">

                    <h2 style="margin: 0; padding: 0">DeltaSpike</h2>
                    <div class="module-box deltaspike title">Scheduler</div>


                </section>

                <!-- Matous -->

                <section data-transition="fade" id="deltaspike-modules-allocation-matous">
                    <h2>DeltaSpike</h2>
                    <div>
                        <div style="width: 200px; display: inline-block">
                            <div class="module-box deltaspike inactive">Core</div>
                            <div class="module-box deltaspike inactive">Data</div>
                            <div class="module-box deltaspike inactive">JPA</div>
                            <div class="module-box deltaspike inactive">BeanVal</div>
                            <div class="module-box deltaspike inactive">Partial Bean</div>
                            <div class="module-box deltaspike inactive">Scheduler</div>
                            <div class="module-box deltaspike inactive">Test Control</div>
                            <div class="module-box deltaspike inactive">Servlet</div>
                            <div class="module-box deltaspike">JSF</div>
                            <div class="module-box deltaspike">Security</div>
                            <div class="module-box other-framework">Agorava</div>
                            <div class="module-box other-framework">PicketLink</div>
                        </div>
                    </div>
                </section>

                <section id="deltaspike-jsf-stack">

                    <section id="ds-jsf-intro">
                        <h2 style="margin: 0; padding: 0">DeltaSpike</h2>
                        <div class="module-box deltaspike title">JSF</div>
                        <p class="fragment">Type-safe view-configs</p>
                        <p class="fragment">Multiple meta-data inheritance</p>
                        <p class="fragment">Benefits from features of any modern Java IDE<br>
                            <small>auto-completion, checking typos, find usages, refactoring and maintenance, inheritance presentation</small></p>
                    </section>

                    <section id="ds-jsf-how">
                        <h2 style="margin: 0; padding: 0">DeltaSpike</h2>
                        <div class="module-box deltaspike title">JSF</div>
                        <p>How does it work?</p>
                        <div class="fragment">
                            <table width="1160px"><TR><TD width="820px" style="font-size:42px;">
                                        <pre><code data-trim class="java">
@Folder
public interface Pages {
    @View (name = "home")
    class Index implements ViewConfig { }

    @Folder
    interface Admin extends ViewConfig {
        @View
        class Index implements Admin { }
    }
}
                    </code></pre>
                                    </TD><TD width="440px">
                                        <div class="fragment">
                                            <p style="font-size:33px;">leads to the following paths:</p>
                                            <code style="font-size:27px">
                                                /pages/<br>    
                                                /pages/home.xhtml<br>
                                                /pages/admin/<br>
                                                /pages/admin/index.xhtml<br>
                                            </code>
                                        </div>
                                    </TD></TR>
                            </table>
                        </div>
                    </section>


                    <!--<section data-transition="fade" id="ds-jsf-an-view">
                                    <h2 style="margin: 0; padding: 0">DeltaSpike</h2>
                                    <div class="module-box deltaspike title jsf_annotation">JSF - annotation</div>
                        <div class="fragment">
                            <p>@View(#name, #basepath, #navigation, #viewparams)</p>
                            <br>
                            <div style="margin-left:-150px;">
                                <pre style="width: 1250px; font-size:25px;"><code data-trim class="java">
            @View(name = "home", basePath = "/w1/", navigation = REDIRECT, viewParams = INCLUDE)
            public class Index implements ViewConfig { }
                                </code></pre>
                            </div>
                        </div>
                    </section>
            
                    <section data-transition="fade" id="ds-jsf-an-folder">
                                    <h2 style="margin: 0; padding: 0">DeltaSpike</h2>
                                    <div class="module-box deltaspike title jsf_annotation">JSF - annotaion</div>
                        <p>@Folder(#name)</p>
                        <br>
                        <pre style="font-size:25px;"><code data-trim class="java">
            @Folder(name = "/admin/")
            public interface Pages implements ViewConfig { }
                        </code></pre>
                    </section>-->

                    <section id="ds-jsf-an-nav-par">
                        <h2 style="margin: 0; padding: 0">DeltaSpike</h2>
                        <div class="module-box deltaspike title jsf_annotation">JSF &ndash; annotation</div>
                        <p>Navigation</p>
                        <div style="margin-left:-150px;" class="fragment">
                            <pre style="width: 1200px; font-size:25px;"><code data-trim class="java">
@Model
public interface Pages extends ViewConfig {
    class Index implements Pages { 
            @NavigationParameter(key = "param", value = "#{myBean.property}")
            public Class&lt;? extends ViewConfig&gt; actionMethod() {
                    return Pages.Home.class;
            }
    }
    
    @View(navigation = REDIRECT, viewParams = INCLUDE)
    class Home implements Pages { }
}</code></pre>
                        </div>
                    </section>

                    <section id="ds-jsf-an-view-con-ref">
                        <h2 style="margin: 0; padding: 0">DeltaSpike</h2>
                        <div class="module-box deltaspike title jsf_annotation">JSF &ndash; annotation</div>
                        <p>View-Controller Callbacks via @ViewControllerRef</p>
                        <br>
                        <div class="fragment">
                            <p style="font-size:30px; width: 1200px; margin-left:-100px;"><code>@InitView, @PreViewAction, @PreRenderView and @PostRenderView</code></p>
                        </div>
                        <div class="fragment">
                            <pre style="font-size:25px;"><code data-trim class="java">
@ViewControllerRef(MyPageController.class)
public class MyPage implements ViewConfig { }

@Model
public class MyPageController {
    @PreRenderView
    protected void load() {
        //...
    }
}
                </code></pre>
                        </div>
                    </section>

                    <!--<section data-transition="fade" id="ds-jsf-an-view-ref">
                                    <h2 style="margin: 0; padding: 0">DeltaSpike</h2>
                                    <div class="module-box deltaspike title jsf_annotation">JSF - annotaion</div>
                        <p>@ViewRef(#viewConfig)</p>
                        <br>
                        <div>
                            <pre style="font-size:25px;"><code style="min-height:430px;" data-trim class="java">
            public interface Pages extends ViewConfig
            {
                class Index implements Pages { }
            }
            
            @ViewRef(Pages.Index.class)
            public class IndexController implements Serializable
            {
                @PreRenderView
                protected void preRenderView()
                {
                    //...
                }
            }
                            </code></pre>
                        </div>
                    </section>-->
                </section>

                <section id="deltaspike-security-stack">

                    <section id="ds-security-intro">
                        <h2 style="margin: 0; padding: 0">DeltaSpike</h2>
                        <div class="module-box deltaspike title">Security</div>
                        <p class="fragment">Secures a method invocation</p>
                        <p class="fragment">Secures an access to classes</p>
                        <p class="fragment">Integration with JSF module<br>
                    </section>

                    <section id="ds-security-an-bind">
                        <h2 style="margin: 0; padding: 0">DeltaSpike</h2>
                        <div class="module-box deltaspike title security_annotation">Security - annotation</div>
                        <p>@SecurityBindingType</p>
                        <br>
                        <div class="fragment">
                            <pre style="font-size:25px;"><code data-trim class="java">
@Retention(value = RUNTIME)
@Target({TYPE, METHOD})
@Documented
@SecurityBindingType
public @interface CustomSecurityBinding {
}
                    </code></pre>
                        </div>
                    </section>

                    <section id="ds-security-an-bind-auth">
                        <h2 style="margin: 0; padding: 0">DeltaSpike</h2>
                        <div class="module-box deltaspike title security_annotation">Security - annotation</div>
                        <p>@CustomSecurityBinding</p>
                        <div class="fragment">
                            <pre style="font-size:25px;"><code data-trim class="java">
@CustomSecurityBinding
public void doSomething(Thing thing)
{
    thing.doSomething();
}
                    </code></pre>
                        </div>
                        <br>
                        <div class="fragment" style="margin-left:-200px;">
                            <p>+ @Secures</p>
                            <pre style="width: 1350px; font-size:25px;"><code data-trim class="java">
@Secures
@CustomSecurityBinding
public boolean doSecuredCheck(InvocationContext invCont, BeanManager bm, @LoggedIn User user)
throws Exception 
{
    return user.isLoggedIn(); // perform security check
}
                    </code></pre>
                        </div>
                    </section>

                    <!--        <section data-transition="fade" id="ds-security-an-param">
                                            <h2 style="margin: 0; padding: 0">DeltaSpike</h2>
                                            <div class="module-box deltaspike title security_annotation">Security - annotation</div>
                                <p>@SecurityParameterBinding</p>
                                <br>
                                <div>
                                    <pre style="font-size:25px;"><code data-trim class="java">
                    @Retention(value = RUNTIME)
                    @Target({PARAMETER})
                    @Documented
                    @SecurityParameterBinding
                    public @interface CurrentThing {
                    }
                                    </code></pre>
                                    <div class="fragment">
                                        <pre style="font-size:25px;"><code data-trim class="java">
                    @CustomSecurityBinding
                    doSomething(@CurrentThing Thing thing)
                    //...
                                        </code></pre>
                                        <pre style="font-size:25px;"><code data-trim class="java">
                    @Secures
                    @CustomSecurityBinding
                    doSecuredCheck(... @CurrentThing Thing thing, ...)
                    //...
                                        </code></pre>
                                    </div>
                                </div>
                            </section>-->

                    <section id="ds-security-an-param">
                        <h2 style="margin: 0; padding: 0">DeltaSpike</h2>
                        <div class="module-box deltaspike title security_annotation">Security - annotation</div>
                        <p>@Secured(AccessDecisionVoter.class)</p>
                        <br>
                        <div class="fragment">
                            <pre style="font-size:25px;"><code data-trim class="java">
@Secured(CustomAccessDecisionVoter.class)
public class SecuredBean
{
    //...
}
                </code></pre>
                            <div class="fragment">
                                <pre style="font-size:25px;"><code data-trim class="java">
public class Bean
{
    @Secured(CustomAccessDecisionVoter.class)
    public String securedMethod()
    {
        //...
    }
}
                    </code></pre>
                            </div>
                        </div>
                    </section>

                    <section id="ds-security-jsf-int">
                        <h2 style="margin: 0; padding: 0">DeltaSpike</h2>
                        <div class="module-box deltaspike title">Security</div> + <div class="module-box deltaspike title">JSF</div>
                        <p>Integration with JSF module</p>
                        <div class="fragment">
                            <pre style="font-size:25px;"><code data-trim class="java">
@Secured(UserAccessDecisionVoter.class)
public interface Pages extends ViewConfig
{
    class Index implements Pages { }

    @Secured(AdminAccessDecisionVoter.class)    
    interface Admin extends Pages
    {
                class Manage implements Admin { }    
    
                class Home implements Admin { }
    }
}
                    </code></pre>
                        </div>
                    </section>
                </section>

                <section id="agorava-stack">

                    <section id="agorava-intro">
                        <h2 style="margin: 0; padding: 0">Agorava</h2>
                        <br />
                        <!--<p class="fragment">Type-safe view-configs</p>-->
                        <div style="text-align: left; display: inline-block; vertical-align: top; margin-top: 10px">
                            <div>
                                <h3 style="display:inline" class="fragment">What?</h3>
                                <p style="display: inline-block; vertical-align: top" class="fragment">CDI extension framework</p>
                            </div>
                            <br/>
                            <div>
                                <h3 style="display:inline" class="fragment">Why?</h3>
                                <p style="display: inline-block; vertical-align: top" class="fragment">To deal with Social Media <br/> based on OAuth 1.0a and OAuth 2.0</p>
                            </div>
                            <br/>
                            <div>
                                <h3 style="display:inline" class="fragment">Who?</h3>
                                <p style="display: inline-block; vertical-align: top" class="fragment">JBoss committers<br />other CDI ext. authors</p>
                            </div>
                            <br/>
                            <div>
                                <h3 style="display:inline" class="fragment">When?</h3>
                                <p style="display: inline-block; vertical-align: top" class="fragment">now: 0.7.0<br /><i>soon:</i> 1.0</p>
                            </div>
                        </div>

                    </section>
                </section>

                <!-- FINAL SLIDES -->

                <section id="agorava-scheduler-twitter-demo">

                    <h2>Demo time</h2>
                    <!-- AJAX polling or websocket served feed of twitter timeline for @rsmeral #devconf 
                         Server side does DS-Scheduler initiated Agorava-backed poll of twitter timeline -->
                </section>

                <section id="final-questions">
                    <img src="img/got_questions_logo.png" style="border: none; background: none; box-shadow: none;" height="300" />
                </section>

                <section id="final-contribute">
                    <h2>How can I contribute?</h2>
                    <div class="fragment">
                        <h3>DeltaSpike</h3>
                        <p>
                            <small><a href="https://git-wip-us.apache.org/repos/asf/deltaspike.git">https://git-wip-us.apache.org/repos/asf/deltaspike.git</a></small><br />
                            <small><a href="https://issues.apache.org/jira/browse/DELTASPIKE">https://issues.apache.org/jira/browse/DELTASPIKE</a></small><br />
                            <small>{users,dev}@deltaspike.apache.org</small>
                        </p>
                    </div>
                    <div class="fragment">
                        <h3>PicketLink</h3>
                        <p>
                            <small><a href="https://github.com/picketlink">https://github.com/picketlink</a></small><br />
                            <small><a href="https://issues.jboss.org/browse/PLINK">https://issues.jboss.org/browse/PLINK</a></small><br />
                        </p>
                    </div>
                    <div class="fragment">
                        <h3>Agorava</h3>
                        <p>
                            <small><a href="https://github.com/agorava">https://github.com/agorava</a></small><br />
                        </p>
                    </div>
                </section>

                <section id="final-thanks-feedback">
                    <h2>Thank you</h2>
                    <div class="fragment">
                        <p>Feedback?</p>
                        <div>
                            <p><a href="http://devconf.cz/f/72">http://devconf.cz/f/72</a></p>
                            <img src="img/feedback_qr.png" width="300" />
                            <p>Slides at <a href="https://github.com/rsmeral/devconf2014">https://github.com/rsmeral/devconf2014</a></p>
                            <p><small>Made with <a href="http://lab.hakim.se/reveal-js/">reveal.js</a></small></p>
                        </div>
                    </div>
                </section>

            </div>

        </div>

        <script src="lib/js/head.min.js"></script>
        <script src="js/reveal.min.js"></script>

        <script>

            // Full list of configuration options available here:
            // https://github.com/hakimel/reveal.js#configuration
            Reveal.initialize({
                controls: true,
                progress: true,
                history: true,
                center: true,
                theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
                transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none
                transitionSpeed: 'fast', // default/fast/slow

                // Parallax scrolling
                // parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
                // parallaxBackgroundSize: '2100px 900px',

                // Optional libraries used to extend on reveal.js
                dependencies: [
//                    { src: 'socket.io/socket.io.js', async: true },
//                    { src: 'plugin/notes-server/client.js', async: true },
                    {src: 'lib/js/classList.js', condition: function() {
                            return !document.body.classList;
                        }},
                    {src: 'plugin/markdown/marked.js', condition: function() {
                            return !!document.querySelector('[data-markdown]');
                        }},
                    {src: 'plugin/markdown/markdown.js', condition: function() {
                            return !!document.querySelector('[data-markdown]');
                        }},
                    {src: 'plugin/highlight/highlight.js', async: true, callback: function() {
                            hljs.initHighlightingOnLoad();
                        }},
                    {src: 'plugin/zoom-js/zoom.js', async: true, condition: function() {
                            return !!document.body.classList;
                        }},
                    {src: 'plugin/notes/notes.js', async: true, condition: function() {
                            return !!document.body.classList;
                        }}
                ]
            });

        </script>

    </body>
</html>
